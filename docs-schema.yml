$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://example.com/schemas/docs-frontmatter.schema.json"
title: "Documentation Frontmatter Schema"
description: "Validation schema for Markdown frontmatter used by the docs pipeline."
type: object
additionalProperties: true

required:
  - title
  - description
  - content_type

properties:
  schema_version:
    type: string
    description: "Schema contract version used by this frontmatter block."
    pattern: "^1\\.[0-9]+$"
    default: "1.0"

  title:
    type: string
    minLength: 8
    maxLength: 120

  description:
    type: string
    minLength: 20
    maxLength: 220

  content_type:
    type: string
    enum:
      - tutorial
      - how-to
      - concept
      - reference
      - troubleshooting
      - release-note

  product:
    type: string
    enum:
      - both
      - cloud
      - self-hosted

  status:
    type: string
    description: "Lifecycle status of this page."
    enum:
      - draft
      - active
      - deprecated
      - archived
    default: active

  since_version:
    type: string
    description: "Version where this feature/topic became available."
    pattern: "^[0-9]+\\.[0-9]+(\\.[0-9]+)?$"

  owner_team:
    type: string
    description: "Owning team slug."
    pattern: "^[a-z0-9]+(?:-[a-z0-9]+)*$"
    minLength: 2
    maxLength: 64

  compatibility:
    type: string
    description: "Compatibility scope for the page."
    enum:
      - universal
      - api-v1
      - api-v2
      - cloud-only
      - self-hosted-only

  last_reviewed:
    type:
      - string
      - "null"
    pattern: "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"

  app_version:
    type: string
    pattern: "^[0-9]+\\.[0-9]+(\\.[0-9]+)?$"

  tags:
    type: array
    minItems: 1
    maxItems: 20
    uniqueItems: true
    items:
      type: string
      minLength: 1
      maxLength: 40
