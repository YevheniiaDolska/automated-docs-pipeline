{%- extends "base.html" -%}

{% block extrahead %}
  {{ super() }}

  {# Meta tags for Algolia DocSearch and other search engines #}
  {% if page and page.meta %}

    {# Basic metadata #}
    {% if page.meta.description %}
      <meta name="description" content="{{ page.meta.description }}">
    {% endif %}

    {# Algolia DocSearch facets - configurable for any project #}
    {% if page.meta.content_type %}
      <meta name="docsearch:content_type" content="{{ page.meta.content_type }}">
    {% endif %}

    {% if page.meta.product %}
      <meta name="docsearch:product" content="{{ page.meta.product }}">
    {% endif %}

    {% if page.meta.component %}
      <meta name="docsearch:component" content="{{ page.meta.component }}">
    {% endif %}

    {% if page.meta.version %}
      <meta name="docsearch:version" content="{{ page.meta.version }}">
    {% endif %}

    {% if page.meta.tags %}
      <meta name="docsearch:tags" content="{{ page.meta.tags | join(', ') }}">
    {% endif %}

    {# Additional custom facets - easily extensible #}
    {% if page.meta.audience %}
      <meta name="docsearch:audience" content="{{ page.meta.audience }}">
    {% endif %}

    {% if page.meta.difficulty %}
      <meta name="docsearch:difficulty" content="{{ page.meta.difficulty }}">
    {% endif %}

    {# SEO and social media tags #}
    <meta property="og:title" content="{{ page.title }} - {{ config.site_name }}">
    {% if page.meta.description %}
      <meta property="og:description" content="{{ page.meta.description }}">
    {% endif %}
    <meta property="og:type" content="article">

  {% endif %}
{% endblock %}

{% block content %}

  {# Automatic lifecycle banners based on frontmatter #}
  {% if page and page.meta %}
    {% if page.meta.maturity == 'deprecated' %}
      <div class="admonition warning">
        <p class="admonition-title">‚ö†Ô∏è Deprecated</p>
        <p>This feature is deprecated{% if page.meta.deprecated_since %} since {{ page.meta.deprecated_since }}{% endif %}.</p>
        {% if page.meta.replaced_by %}
          <p>Please use <a href="{{ page.meta.replaced_by }}">the replacement feature</a> instead.</p>
        {% endif %}
        {% if page.meta.sunset_date %}
          <p>This will be removed on {{ page.meta.sunset_date }}.</p>
        {% endif %}
      </div>
    {% elif page.meta.maturity == 'preview' %}
      <div class="admonition info">
        <p class="admonition-title">üî¨ Preview Feature</p>
        <p>This feature is in preview and may change without notice.</p>
      </div>
    {% elif page.meta.maturity == 'beta' %}
      <div class="admonition info">
        <p class="admonition-title">üß™ Beta Feature</p>
        <p>This feature is in beta. APIs and functionality may change before general availability.</p>
      </div>
    {% endif %}
  {% endif %}

  {# Original content #}
  {{ super() }}

{% endblock %}

{% block htmltitle %}
  {# Add lifecycle state to page title #}
  {% if page and page.meta %}
    {% if page.meta.maturity == 'deprecated' %}
      <title>[Deprecated] {{ page.title }} - {{ config.site_name }}</title>
    {% elif page.meta.maturity == 'preview' %}
      <title>[Preview] {{ page.title }} - {{ config.site_name }}</title>
    {% else %}
      {{ super() }}
    {% endif %}
  {% else %}
    {{ super() }}
  {% endif %}
{% endblock %}